{% extends "project/layout.html" %}
{%load static%}


{% block body %}

<script>
    function openDelete(){
  document.getElementById("delete").style.display = "block";
}
function closeDelete(){
  document.getElementById("delete").style.display = "none";
}
  function openFeedback(){
  document.getElementById("feedbacktotal").style.display = "block";
}
function closeFeedback(){
  document.getElementById("feedbacktotal").style.display = "none";
}
</script>
<div id = "feedbacktotal" style="display:none;">
  <div class = "background-fade">
  </div>
  <div class = "feedback">
    <button onclick="closeFeedback()" class="w3-bar-item w3-button w3-small" style = "margin: 0; padding: 0;">Close &times;</button>
    <form action = "{% url 'savethehawkers:editing' stalls.name %}" method = "POST" style = "text-align: left;" enctype="multipart/form-data">
      {%csrf_token%}
      <div class = "form-group m-3">
      Image:<input  type = "file" name = "image" class = "form-control-file">
      </div>
      Latitude:<input type = "float" name = "latitude" value = "{{stalls.latitude}}" class = "form-control"><br>
      Longitude:<input type = "float" name = "longtitude" value = "{{stalls.longtitude}}" class = "form-control"><br>
      Name:<input type = "hidden" name = "name" value = "{{stalls.name}}" class = "form-control">{{stalls.name}}<br>
      Stalltype:<input type = "text" name = "stalltype" value = "{{stalls.stalltype}}" class = "form-control"><br>
      Address:<input type = "text" name = "address" value = "{{stalls.address}}" class = "form-control"><br>
      Hours:<input type = "text" name = "hours" value = "{{stalls.hours}}" class = "form-control"><br>
      Recommendation:<input type = "text" name = "reco" value = "{{stalls.reco}}" class = "form-control"><br>
      Details:<input type = "text" name = "details" value = "{{stalls.details}}" class = "form-control"><br>
      Contributor:<input type = "hidden" name = "contributor" value = "{{stalls.contributor}}" class = "form-control">{{stalls.contributor}}<br>
      Hawker's Message:<input type = "text" name = "message" value = "{{stalls.message}}" class = "form-control"><br>
      Number:<input required type = "number" name = "number" value = "{{stalls.number}}" class = "form-control"><br>
      Online Delivery Needed:<input type = "checkbox" name = "fooddelivery" value = "{{stalls.fooddelivery}}" class = "form-control"><br>
      Has Phone Delivery:<input type = "checkbox" name = "phonedelivery" value = "{{stalls.phonedelivery}}" class = "form-control"><br>
      Needs Freelance Deliverers:<input type = "checkbox" name = "freelance" value = "{{stalls.freelance}}" class = "form-control"><br>
      Halal:<input type = "checkbox" name = "halal" value = "{{stalls.halal}}" class = "form-control"><br>
      Deals:<input type = "text" name = "deals" value = "{{stalls.deals}}" class = "form-control"><br>
      Awards:<input type = "text" name = "awards" value = "{{stalls.awards}}" class = "form-control"><br>
      Price Range:<input type = "text" name = "pricerange" value = "{{stalls.pricerange}}" class = "form-control"><br>
      <input type = "submit" value = "Submit" class = "btn btn-primary">
    </form>
  </div>
</div>
<!-- Edit -->
  <div id = "delete" style="display:none;">
    <div class = "background-fade">
    </div>
    <div class = "feedback">
      <button onclick="closeDelete()" class="w3-bar-item w3-button w3-small" style = "margin: 0; padding: 0;">Close &times;</button>
      <form action = "{%url 'savethehawkers:delete' stalls.name%}" method = "POST" style = "text-align: left;">
        {%csrf_token%}
        Are you sure?
        <input type = "submit" value = "Yes" style = "background-color: #b2ab8c; width: 33vw; height: 60px; border: 3px solid black;">
      </form>
    </div>
  </div>
  {% if user.is_authenticated %}
<button onclick = "openDelete()">Delete</button> <button onclick="openFeedback()">Edit</button>
{%else%}s
<dt> Sign in to make changes.</dt>
{%endif%}




<!-- Stall Information -->
<div class="listing-example">
  <h1 style="padding: 0.5rem;">{{stalls.name}} </h1>
  {%block stalls.image%}{%if stalls.image%}
  <div class="listing-example-img"><img src="{{stalls.image.url}}" style="position: relative; height: 100%; width: 100%;"></div>
  {%else%}
  <div class="listing-example-img">Be the first to insert an image.</div>
  {%endif%}
  {%endblock%}
  <p class="listing-example-info">
      Name: {{stalls.name}} <br>
      Orders: {%for item in items%}{{item}}{%endfor%} <br>
      Stall type: {{stalls.stalltype}} <br>
      Address: {{stalls.address}} <br>
      Hours: {{stalls.hours}} <br>
      Recommendation: {{stalls.reco}} <br>
      Details: {{stalls.details}} <br>
      Contributor: {{stalls.contributor}}<br>
      Message: {{stalls.message}} <br>
      Number: {{stalls.number}} <br>
      Online Delivery: {{stalls.fooddelivery}} <br>
      Phone Delivery: {{stalls.phonedelivery}} <br>
      Freelance Delivery Needed: {{stalls.freelance}} <br>
      Deals: {{stalls.deals}} <br>
      Awards: {{stalls.awards}} <br>
      Halal: {{stalls.halal}} <br>
      Price Range: {{stalls.pricerange}}
  </p>
</div>


<form style = "margin-left: 15px;" action = "{% url 'savethehawkers:comment' stalls.name %}" method = "POST" enctype="multipart/form-data">
  {%csrf_token%}
  <h2 class = "m-3"> Comments </h2>
  <div class = "form-group m-3">
    <textarea required type = "text" name = "description" class = "form-control" placeholder = "Comment"></textarea>
  </div>
  <div class = "form-group m-3">
    <input style = "outline: none; resize: none; overflow: auto;" cols = '30' rows = '6' required type = "text" name = "ordered" class = "form-control" placeholder = "What did you order?"></textarea>
  </div>
  <div class = "form-group m-3">
    Image:<input required type = "file" name = "foodimage" class = "form-control-file">
  </div>
  <script src='https://www.google.com/recaptcha/api.js'></script>
  <div class="g-recaptcha" data-sitekey="6LdXNYgbAAAAAOsEZVE3yKopeRSa8FcBQwaXKNCT"></div>

  <input type = "submit" value = "Submit" class = "m-3 btn btn-primary">
  <input type = "hidden" value = "{{user.username}}" name = "contributor">

</form>
<div style = "margin-left: 15px">
  
  <h2>Comments</h2>
  {%for comment in comments%}
  {%if forloop.revcounter <= 5%}
  <p>{{comment.comment}}</p>
  <p><img src="{{comment.image.url}}" width= "100" height= "100"></p>
  <p>{{comment.ordered}}</p>
  {%endif%}
  {%empty%}
  Be the first to promote the hawker's stall!
  {%endfor%}
</div>
  
  
<footer>
  <a href="#">GitHub</a>
</footer>

{% endblock %}