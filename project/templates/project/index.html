{% extends "project/layout.html" %}
{% load static %}
{% block body %}



{% if no %}
<div class = "display: flex; flex-direction: column">
<!-- Map and Searchbox-->

<div class = "flexbox" style = "display: flex; flex: 1;  width: 100vw; height: 90vh">
    <!-- Map -->
    <div style = "flex: 1 100%; padding: 20px; box-sizing: border-box; ">
        <div style = "display: flex; flex-direction: column;">
            <div style = "flex: 1; font-size: 45px; font-weight: bolder;">
                An initiative to help digitally illiterate hawkers promote their stalls
            </div>
            <br>
            <br>
            <div style = "flex: 1">
                Find the nearest stall to you. Add a photo - this advertises the stall on Telegram. Help hawkers convey a message.
            </div>
            <br>
            <br>
            <div style = "flex: 1">
                <iframe class = "box" src="https://www.google.com/maps/d/embed?mid=1XcpTiJpt_O-Rw6Wu8qrtCm_Ek9VUgIDF" ></iframe>
            </div>
        </div>
        
    </div>
    <!-- Search boxes -->
    <div style = "display: flex; flex: 1 100%;">
        <div class = "box2" style = "flex: 1 10%; display: flex; flex-direction: column;padding: 20px;">
            <div style = "flex: 1 100%">
            1
            <br>
            Nearby stalls
            </div>
            <div style = "flex: 1 100% ">
            2
            <br>
            Search by recommendations
            </div>
            <div style = "flex: 1 100%">
            3
            <br>
            Search by type of stall
            </div>
        </div>
        <div class = "box2" style = "flex: 1 100%; display: flex; flex-direction: column; padding: 20px;">
            <div style = "flex: 1 100%; background-color:pink; ">
            <dt>{%if not no%}Page {{pagenumber}},{%endif%} Postal code: {{postalcode}}</dt>
                <form action = "{%url 'savethehawkers:index'%}" method = "POST">
                    {%csrf_token%}
                    <input type = "text" name = "postalcode" placeholder = "Postal Code">
                    <dt>{{message}}</dt>
                    <input type = "submit">
                </form> 
            </div>
        <hr>
            <div style = "flex: 1 100%; background-color: lightblue;">
                <form action = "{%url 'savethehawkers:search'%}" method = "POST">
                    {%csrf_token%}
                    {{form}}
                    <br>
                    <input type = "submit">
                </form> 
                <dt>{{searchmessage}}</dt>
            </div>
        <hr>
        <div style = "flex: 1 100%; background-color: lightgreen;">
            <form action = "{%url 'savethehawkers:stalltype'%}" method = "POST">
                {%csrf_token%}
                <dd>Stall Type:</dd>
                <select name = "stalltype">
                    <option value = "Chinese">Chinese</option>
                    <option value = "Malay">Malay</option>
                    <option value = "Indian">Indian</option>
                    <option value = "Western">Western</option>
                    <option value = "Dessert">Dessert</option>
                    <option value = "Drinks">Drinks</option>
                    <option value = "Snacks">Snacks</option>
                    <option value = "Vegetarian">Vegetarian</option>
                    <option value = "Others">Others</option>
                </select>
            <br>
            <br>
                <dd>Postal Code:</dd>
                <input type = "text" name = "postalcode" placeholder = "Postal Code">
                <input type = "submit">
            </form> 
        </div>
    </div>
</div>
</div>
<!---->

<!-- History -->
<h4 style = "margin-left: 20px; flex: 1">History of created listings</h4>
<table class = "table table-dark rounded shadow-lg" style = "width: fit-content; margin-left: 20px">
    {%for hist in history%}
    <thead>
    <tr>
        <th><a href = "{%url 'savethehawkers:info' hist.name%}">{{hist.name}}</a></th>
    </tr>
    </thead>
    <tbody>
    <tr>
        
        <td>{{hist.contributor}}</td>
    </tr>
    <tr>
        <td>{{hist.address}}</td>
    </tr>
    </tbody>
    {%endfor%}
</table>
<!---->

<!-- Comments -->
<hr>
<h4 style = "margin-left: 20px;flex: 1">Comments</h4>
{%for comment in comments%}
    {%if forloop.revcounter <= 5%}
<table class = "table table-hover table-sm" style = "width:fit-content; margin-left: 20px">
    <thead class = "thead-dark">
        <tr>
            <th>Comment</th>
            <th>Image</th>
            <th>Order</th>
            <th>Stall Name</th>
            <th>Address</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>{{comment.comment}}</td>
            <td><img src="{{comment.image.url}}" width= "100" height= "100"></td>
            <td>{{comment.ordered}}</td>
            <td><a href = "{%url 'savethehawkers:info' comment.stallname %}">{{comment.stallname}}</a></td>
            <td>{{comment.address}}</td>
        </tr>
    </tbody>
</table>
<!---->
</div>
    {%endif%}
{%endfor%}
{%endif%}





{%if not no%}
<div style = "display:flex;" class = "directory">
    <div style = "flex: 1" class = "directory-box">
        <table class = "place table table-dark" style = "text-align: center; margin: 10px;">
            <thead>
            <tr>
                {% for name in names %} {% if forloop.counter == 1 %}
                <th style = "text-align: center"><a href = "{%url 'savethehawkers:info' name%}">{{name}}</a></th>
                {%endif%}
                {%empty%}
                <th>No results.</th>
                {%endfor%}
            </tr>
            </thead>
            <tbody>
            <tr>
                {% for lat,long,latitude,longtitude in latandlong %} {% if forloop.counter == 1 %}
                <td><iframe src="https://www.google.com/maps/embed?pb=!1m20!1m8!1m3!1d3988.6465974837542!2d103.90673351475411!3d1.388622348987243!3m2!1i1024!2i768!4f13.1!4m9!3e6!4m3!3m2!1d{{lat}}!2d{{long}}!4m3!3m2!1d{{latitude}}!2d{{longtitude}}!5e0!3m2!1sen!2ssg!4v1622359275905!5m2!1sen!2ssg" width="240" height="180" style="border:0;" allowfullscreen="" loading="lazy" id = "map"></iframe></td>
                {%endif%}
                {%empty%}<td>No results.</td>
                {%endfor%}
            </tr>
            <tr>
                {% for number in numbers %} {% if forloop.counter == 1 %}
                <td><span style = "color: lightslategray"> Distance: </span>{{number}} metres away.</td>
                {%endif%}
                {%empty%}<td>No results.</td>
                {%endfor%}
            </tr>
            <tr>
                {% for address in addresses %} {% if forloop.counter == 1 %}
                <td><span style = "color: lightslategray"> Address: </span>{{address}}</td>
                {%endif%}
                {%empty%}<td>No results.</td>
                {%endfor%}
            </tr>
            <tr>
                {% for hour in hours %} {% if forloop.counter == 1 %}
                <td><span style = "color: lightslategray"> Opening Hours: </span>{{hour}}</td>
                {%endif%}
                {%empty%}<td>No results.</td>
                {%endfor%}
            </tr>
            <tr>
                {% for rec in recos %} {% if forloop.counter == 1 %}
                <td><span style = "color: lightslategray"> Recommendation: </span>{{rec}}</td>
                {%endif%}
                {%empty%}<td>No results.</td>
                {%endfor%}
            </tr>
            </tbody>
        </table>
    </div>
    
    <div style = "flex: 1" class = "directory-box">
        <table class = "place table table-dark" style = "text-align: center; margin: 10px;">
            <thead>
            <tr>
                {% for name in names %} {% if forloop.counter == 2 %}
                <th style = "text-align: center"><a href = "{%url 'savethehawkers:info' name%}">{{name}}</a></th>
                {%endif%}
                {%empty%}
                <th>No results.</th>
                {%endfor%}
            </tr>
            </thead>
            <tbody>
            <tr>
                {% for lat,long,latitude,longtitude in latandlong2 %} {% if forloop.counter == 2 %}
                <td><iframe src="https://www.google.com/maps/embed?pb=!1m20!1m8!1m3!1d3988.6465974837542!2d103.90673351475411!3d1.388622348987243!3m2!1i1024!2i768!4f13.1!4m9!3e6!4m3!3m2!1d{{lat}}!2d{{long}}!4m3!3m2!1d{{latitude}}!2d{{longtitude}}!5e0!3m2!1sen!2ssg!4v1622359275905!5m2!1sen!2ssg" width="240" height="180" style="border:0;" allowfullscreen="" loading="lazy" id = "map"></iframe></td>
                {%endif%}
                {%empty%}
                <td>No results</td>
                {%endfor%}
            </tr>
            <tr>
                {% for number in numbers %} {% if forloop.counter == 2 %}
                <td><span style = "color: lightslategray"> Distance: </span>{{number}} metres away.</td>
                {%endif%}
                {%empty%}<td>No results.</td>
                {%endfor%}
            </tr>
            <tr>
                {% for address in addresses %} {% if forloop.counter == 2 %}
                <td><span style = "color: lightslategray"> Address: </span>{{address}}</td>
                {%endif%}
                {%empty%}<td>No results.</td>
                {%endfor%}
            </tr>
            <tr>
                {% for hour in hours %} {% if forloop.counter == 2 %}
                <td><span style = "color: lightslategray"> Opening Hours: </span>{{hour}}</td>
                {%endif%}
                {%empty%}<td>No results.</td>
                {%endfor%}
            </tr>
            <tr>
                {% for rec in recos %} {% if forloop.counter == 2 %}
                <td><span style = "color: lightslategray"> Recommendation: </span>{{rec}}</td>
                {%endif%}
                {%empty%}<td>No results.</td>
                {%endfor%}
            </tr>
            </tbody>
        </table>
    </div>
    <div style = "flex: 1" class = "directory-box">
        <table class = "place table table-dark" style = "text-align: center; margin: 10px;">
            <thead>
            <tr>
                {% for name in names %} {% if forloop.counter == 3 %}
                <th style = "text-align: center"><a href = "{%url 'savethehawkers:info' name%}">{{name}}</a></th>
                {%endif%}
                {%empty%}
                <th>No results.</th>
                {%endfor%}
            </tr>
            </thead>
            <tbody>
            <tr>
                {% for lat,long,latitude,longtitude in latandlong3 %} {% if forloop.counter == 3 %}
                <td><iframe src="https://www.google.com/maps/embed?pb=!1m20!1m8!1m3!1d3988.6465974837542!2d103.90673351475411!3d1.388622348987243!3m2!1i1024!2i768!4f13.1!4m9!3e6!4m3!3m2!1d{{lat}}!2d{{long}}!4m3!3m2!1d{{latitude}}!2d{{longtitude}}!5e0!3m2!1sen!2ssg!4v1622359275905!5m2!1sen!2ssg" width="240" height="180" style="border:0;" allowfullscreen="" loading="lazy" id = "map"></iframe></td>
                {%endif%}
                {%empty%}
                <td>No results</td>
                {%endfor%}
            </tr>
            <tr>
                {% for number in numbers %} {% if forloop.counter == 3 %}
                <td><span style = "color: lightslategray"> Distance: </span>{{number}} metres away.</td>
                {%endif%}
                {%empty%}<td>No results.</td>
                {%endfor%}
            </tr>
            <tr>
                {% for address in addresses %} {% if forloop.counter == 3 %}
                <td><span style = "color: lightslategray"> Address: </span>{{address}}</td>
                {%endif%}
                {%empty%}<td>No results.</td>
                {%endfor%}
            </tr>
            <tr>
                {% for hour in hours %} {% if forloop.counter == 3 %}
                <td><span style = "color: lightslategray"> Opening Hours: </span>{{hour}}</td>
                {%endif%}
                {%empty%}<td>No results.</td>
                {%endfor%}
            </tr>
            <tr>
                {% for rec in recos %} {% if forloop.counter == 3 %}
                <td><span style = "color: lightslategray"> Recommendation: </span>{{rec}}</td>
                {%endif%}
                {%empty%}<td>No results.</td>
                {%endfor%}
            </tr>
            </tbody>
        </table>
    </div>
    <div style = "flex: 1" class = "directory-box">
        <table class = "place table table-dark" style = "text-align: center; margin: 10px;">
            <thead>
            <tr>
                {% for name in names %} {% if forloop.counter == 4 %}
                <th style = "text-align: center"><a href = "{%url 'savethehawkers:info' name%}">{{name}}</a></th>
                {%endif%}
                {%empty%}
                <th>No results.</th>
                {%endfor%}
            </tr>
            </thead>
            <tbody>
            <tr>
                {% for lat,long,latitude,longtitude in latandlong4 %} {% if forloop.counter == 4 %}
                <td><iframe src="https://www.google.com/maps/embed?pb=!1m20!1m8!1m3!1d3988.6465974837542!2d103.90673351475411!3d1.388622348987243!3m2!1i1024!2i768!4f13.1!4m9!3e6!4m3!3m2!1d{{lat}}!2d{{long}}!4m3!3m2!1d{{latitude}}!2d{{longtitude}}!5e0!3m2!1sen!2ssg!4v1622359275905!5m2!1sen!2ssg" width="240" height="180" style="border:0;" allowfullscreen="" loading="lazy" id = "map"></iframe></td>
                {%endif%}
                {%empty%}
                <td>No results</td>
                {%endfor%}
            </tr>
            <tr>
                {% for number in numbers %} {% if forloop.counter == 4 %}
                <td><span style = "color: lightslategray"> Distance: </span>{{number}} metres away.</td>
                {%endif%}
                {%empty%}<td>No results.</td>
                {%endfor%}
            </tr>
            <tr>
                {% for address in addresses %} {% if forloop.counter == 4 %}
                <td><span style = "color: lightslategray"> Address: </span>{{address}}</td>
                {%endif%}
                {%empty%}<td>No results.</td>
                {%endfor%}
            </tr>
            <tr>
                {% for hour in hours %} {% if forloop.counter == 4 %}
                <td><span style = "color: lightslategray"> Opening Hours: </span>{{hour}}</td>
                {%endif%}
                {%empty%}<td>No results.</td>
                {%endfor%}
            </tr>
            <tr>
                {% for rec in recos %} {% if forloop.counter == 4 %}
                <td><span style = "color: lightslategray"> Recommendation: </span>{{rec}}</td>
                {%endif%}
                {%empty%}<td>No results.</td>
                {%endfor%}
            </tr>
            </tbody>
        </table>
    </div>
    <div style = "flex: 1" class = "directory-box">
        <table class = "place table table-dark" style = "text-align: center; margin: 10px;">
            <thead>
            <tr>
                {% for name in names %} {% if forloop.counter == 5 %}
                <th style = "text-align: center"><a href = "{%url 'savethehawkers:info' name%}">{{name}}</a></th>
                {%endif%}
                {%empty%}
                <th>No results.</th>
                {%endfor%}
            </tr>
            </thead>
            <tbody>
            <tr>
                {% for lat,long,latitude,longtitude in latandlong5 %} {% if forloop.counter == 5 %}
                <td><iframe src="https://www.google.com/maps/embed?pb=!1m20!1m8!1m3!1d3988.6465974837542!2d103.90673351475411!3d1.388622348987243!3m2!1i1024!2i768!4f13.1!4m9!3e6!4m3!3m2!1d{{lat}}!2d{{long}}!4m3!3m2!1d{{latitude}}!2d{{longtitude}}!5e0!3m2!1sen!2ssg!4v1622359275905!5m2!1sen!2ssg" width="240" height="180" style="border:0;" allowfullscreen="" loading="lazy" id = "map"></iframe></td>
                {%endif%}
                {%empty%}
                <td>No results</td>
                {%endfor%}
            </tr>
            <tr>
                {% for number in numbers %} {% if forloop.counter == 5 %}
                <td><span style = "color: lightslategray"> Distance: </span>{{number}} metres away.</td>
                {%endif%}
                {%empty%}<td>No results.</td>
                {%endfor%}
            </tr>
            <tr>
                {% for address in addresses %} {% if forloop.counter == 5 %}
                <td><span style = "color: lightslategray"> Address: </span>{{address}}</td>
                {%endif%}
                {%empty%}<td>No results.</td>
                {%endfor%}
            </tr>
            <tr>
                {% for hour in hours %} {% if forloop.counter == 5 %}
                <td><span style = "color: lightslategray"> Opening Hours: </span>{{hour}}</td>
                {%endif%}
                {%empty%}<td>No results.</td>
                {%endfor%}
            </tr>
            <tr>
                {% for rec in recos %} {% if forloop.counter == 5 %}
                <td><span style = "color: lightslategray"> Recommendation: </span>{{rec}}</td>
                {%endif%}
                {%empty%}<td>No results.</td>
                {%endfor%}
            </tr>
            </tbody>
        </table>
    </div>
    <div style = "flex: 1" class = "directory-box">
        <table class = "place table table-dark" style = "text-align: center; margin: 10px;">
            <thead>
            <tr>
                {% for name in names %} {% if forloop.counter == 6 %}
                <th style = "text-align: center"><a href = "{%url 'savethehawkers:info' name%}">{{name}}</a></th>
                {%endif%}
                {%empty%}
                <th>No results.</th>
                {%endfor%}
            </tr>
            </thead>
            <tbody>
            <tr>
                {% for lat,long,latitude,longtitude in latandlong6 %} {% if forloop.counter == 6 %}
                <td><iframe src="https://www.google.com/maps/embed?pb=!1m20!1m8!1m3!1d3988.6465974837542!2d103.90673351475411!3d1.388622348987243!3m2!1i1024!2i768!4f13.1!4m9!3e6!4m3!3m2!1d{{lat}}!2d{{long}}!4m3!3m2!1d{{latitude}}!2d{{longtitude}}!5e0!3m2!1sen!2ssg!4v1622359275905!5m2!1sen!2ssg" width="240" height="180" style="border:0;" allowfullscreen="" loading="lazy" id = "map"></iframe></td>
                {%endif%}
                {%empty%}
                <td>No results</td>
                {%endfor%}
            </tr>
            <tr>
                {% for number in numbers %} {% if forloop.counter == 6 %}
                <td><span style = "color: lightslategray"> Distance: </span>{{number}} metres away.</td>
                {%endif%}
                {%empty%}<td>No results.</td>
                {%endfor%}
            </tr>
            <tr>
                {% for address in addresses %} {% if forloop.counter == 6 %}
                <td><span style = "color: lightslategray"> Address: </span>{{address}}</td>
                {%endif%}
                {%empty%}<td>No results.</td>
                {%endfor%}
            </tr>
            <tr>
                {% for hour in hours %} {% if forloop.counter == 6 %}
                <td><span style = "color: lightslategray"> Opening Hours: </span>{{hour}}</td>
                {%endif%}
                {%empty%}<td>No results.</td>
                {%endfor%}
            </tr>
            <tr>
                {% for rec in recos %} {% if forloop.counter == 6 %}
                <td><span style = "color: lightslategray"> Recommendation: </span>{{rec}}</td>
                {%endif%}
                {%empty%}<td>No results.</td>
                {%endfor%}
            </tr>
            </tbody>
        </table>
    </div>
</div>


<form action = "{%url 'savethehawkers:nextindex' pagenumber%} " method = "POST" >
    {%csrf_token%}
    <input type = "hidden" name = "postalcode" value = "{{postalcode}}">
    <input type = "hidden" name = "pagenumber" value = "{{pagenumber}}">
    <input type = "submit" value = "Next" style = "width: 100%; background-color: gray; color: whitesmoke; font-size: 20px">
</form>
{%endif%}
<!-- History -->

<footer style = "bottom: 0; position: fixed; width: 100%; height: 50px; background-color: cadetblue;" id = "footer">
    <div style = "display: flex; margin-top: 10px; margin-inline: 10px ">
        <div style = "flex: 1; text-align: center; font-weight: bolder;  ">
            Promote the hawkers
        </div>
        <div style = "flex: 1; text-align: center; font-weight: bolder;">
            Earn points
        </div>
        <div style = "align-self: flex-end;">
            <button class = "btn-sm btn-secondary" onclick = closeFooter()>
                x
            </button>
        </div>
    </div>
</footer>
<script>
    function closeFooter()
    {
        document.getElementById("footer").style.display = 'none'
    }
</script>
{% endblock %}